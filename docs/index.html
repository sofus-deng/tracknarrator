<!doctype html>
<html lang="en">

<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>TrackNarrator Demo: Barber Motorsports Park</title>
  <link rel="stylesheet" href="styles.css" />
</head>

<body>
  <main class="container">
    <h1>TrackNarrator Demo: Barber Motorsports Park</h1>

    <div class="intro-block">
      <p><strong>TrackNarrator</strong> turns Toyota GR Cup telemetry into coach-ready post-session reports.</p>
      <p>This demo shows a pre-generated SessionBundle v0.1.2 from the official Hack the Track Barber Motorsports Park
        dataset.</p>
      <p><em>How to read:</em> Use the blue button below to load the demo. The cards show total laps and key lap times,
        the chart shows lap time deltas vs a reference lap, 'Key Events & Coaching Insights' highlights notable laps,
        and the coach score section shows an overall performance rating.</p>
    </div>

    <p class="muted">This page is a read-only viewer for a pre-generated demo session based on the official Hack the
      Track Barber dataset.</p>

    <section class="controls">
      <button id="loadBtn">View Barber Demo Session</button>
      <button id="shareBtn" class="hidden">Create Share Link</button>
      <span id="status" class="muted"></span>
    </section>
    <p class="helper-text">Loads the prepared Barber Motorsports Park demo session with telemetry analysis.</p>
    <section id="shareResult" class="hidden">
      <h3>Share Link</h3>
      <p>Copy this link to share the session:</p>
      <input id="shareUrl" readonly
        style="width:100%;padding:8px;border-radius:5px;border:1px solid #243040;background:#151a21;color:#e6edf3;" />
      <button id="copyBtn">Copy</button>
    </section>

    <section id="kpis" class="kpis hidden"></section>
    <section class="controls">
      <!-- Language selector hidden for demo - defaulting to English -->
      <label class="muted hidden">Display Language:</label>
      <select id="langSel" class="hidden">
        <option value="zh-Hant">zh-Hant</option>
        <option value="en" selected>en</option>
      </select>
      <button id="vizBtn">Show Lap Time Analysis</button>
    </section>
    <section>
      <h2>Lap Time Deltas</h2>
      <p class="helper-text">Shows lap time delta (ms) vs the reference lap. Below zero = faster than reference, above
        zero = slower.</p>
      <div class="chart-legend">
        <span class="legend-item"><span class="legend-color" style="background:#64d2ff;"></span> Driver lap</span>
        <span class="legend-item"><span class="legend-color" style="background:#9ad46a;"></span> Moving average</span>
      </div>
      <canvas id="lapChart" width="1000" height="240"
        style="max-width:100%;border:1px solid #243040;border-radius:10px;background:#0f141b"></canvas>
    </section>
    <section>
      <h2>Key Events & Coaching Insights</h2>
      <p class="helper-text">Outliers detected using robust statistics – these are laps/sections worth discussing with
        the driver.</p>
      <div id="cards" class="grid"></div>
    </section>
    <section>
      <h2>Coach Score & Performance Badge</h2>
      <p class="helper-text">Auto-generated performance assessment based on consistency and key events.</p>
      <div class="coach-section">
        <button id="coachBtn">Generate Coach Assessment</button>
        <canvas id="coachGauge" width="300" height="160"
          style="max-width:100%;border:1px solid #243040;border-radius:10px;background:#0f141b"></canvas>
        <div class="muted" id="coachMeta"></div>
      </div>
    </section>

    <section>
      <h2>Laps</h2>
      <div id="laps" class="scroll"></div>
    </section>
    <section class="muted" style="margin-top:12px">
      <details>
        <summary>Data source</summary>
        <ul>
          <li>Default demo: reads <code>docs/data/summary.json</code> (SessionBundle v0.1.2)</li>
          <li>Shared token: add <code>?token=<TOKEN></code></li>
          <li>Live API: add <code>?sid=<SESSION_ID></code></li>
        </ul>
        <p><small>Note: Raw TRD files are not shipped in this repo. This demo bundle is derived from the official Hack
            the Track / TRD Barber dataset.</small></p>
      </details>
    </section>

    <footer class="docs-links">
      <p class="muted">
        <a href="../README.md">Project Overview</a> •
        <a href="SPEC-schema-v0.1.2.md">Schema Documentation</a>
      </p>
    </footer>
  </main>
  <div id="toast" class="toast"></div>
  <script src="app.js"></script>
</body>

</html>